# @rainbowlaces/base

## 3.15.11

### Patch Changes

- d100d20: - Base: streamlined graceful shutdown (removed verbose diagnostics, simplified signal handling, cleaner uncaught exception / unhandled rejection logging).

  - Request handler: ordered teardown (terminate WS clients, remove listeners, close WSS, graceful server close with 1.5s safety timer + force-close fallback).
  - start command: child process now not detached; receives TTY signals directly. IPC shutdown skipped for real signals; fallback SIGTERM only if IPC unavailable.

  - BASE_DEBUG_SHUTDOWN diagnostics block and redundant commentary noise.

  - Comment pruning and minor log message normalization.

## 3.15.10

### Patch Changes

- 575f9ae: Implement path shortening for improved logging readability

## 3.15.9

### Patch Changes

- 7441e42: Fix to start.js to correctly start local dev server.

## 3.15.8

### Patch Changes

- b8f247c: Fix BaseRequestHandler config error

## 3.15.7

### Patch Changes

- 50e2d25: Fix to ensure BaseRequestHandler is augmenting the AppConfig correctly

## 3.15.6

### Patch Changes

- 91f6935: Fixing things

## 3.15.5

### Patch Changes

- 11812ad: Release with correct build

## 3.15.4

### Patch Changes

- afc5e9a: Fix issue with eslint rules

## 3.15.3

### Patch Changes

- 6ff72e3: Make esbuild-plugin-copy a full dep

## 3.15.2

### Patch Changes

- ff517ef: Bump dependencies.

## 3.15.1

### Patch Changes

- 1987724: Added simple README.md

## 3.15.0

### Minor Changes

- 31ead5f: ## Added

  - Init CLI command with scaffold templates (TS configs, ESLint, HelloModule, client loader).
  - ConfigClassRegistry + class/config decorators overhaul.
  - Phase guards & internal phase handling in request lifecycle.
  - Request timeout control + `treat404AsError` flag.
  - Static module: compression, security (size limits, dotfile handling).
  - Templates engine (tags: if, each, unsafe) + default error template.
  - Logger redactors (PII patterns), serializers, transformers.
  - Extended FileSystem interface + new methods.
  - Changeset config linking packages (monorepo-ready).
  - Custom ESLint rule: no-self-referential-config.
  - MIT LICENSE file.

  ## Changed

  - DI & config wiring refactored (provider / config decorators unified).
  - Logger configuration & injection streamlined; consolidated exports.
  - Request handler teardown & WebSocket cleanup improved.
  - Imports updated to leverage registries (ConfigClassRegistry).
  - Project structure prepped for pnpm monorepo.

  ## Fixed

  - Logger dependency injection context resolution.
  - WebSocket server: proper listener removal on teardown.
  - Decorator import paths (configClass, DI).
  - Added missing `test:spec` script.
  - Various integration edge cases (404 handling, finalization ordering).

  ## Removed

  - Outdated module README files.
  - Legacy versioning/publishing scripts.
  - Autogenerated / redundant template READMEs.

  ## Documentation

  - New architecture overview in README.
  - Internal instructions updated (pnpm usage, dot reporter).
  - Added LICENSE.

  ## Tests

  - Large expansion: config, DI, logger, models (attributes, hydration, serialization), pubsub, request lifecycle (timeouts, phases, 404), static, templates, utilities (fs, recursion, serialization, string, async).

  ## Internal

  - Specifier + lockfile consistency.
  - Monorepo cleanup (.gitignore, sync tooling).
  - Added changeset linking configuration.

  ## Potential Breaking / Upgrade Notes

  - Config & DI: adopt new `ConfigClassRegistry` and updated decorators; legacy patterns may require adjustment.
  - Logger: if consuming internal serializer/redactor APIs, update imports to new consolidated paths.
  - Request handling: new phase guard logic—custom middleware relying on implicit phase ordering should verify behavior.
  - Static module: tightened security defaults (dotfiles, size limits) may block previously served files—configure if needed.

  ## Migration Checklist

  - Replace old config class declarations with new decorators.
  - Verify logger custom serializers/redactors still registered.
  - Review any direct WebSocket teardown hooks (now centralized).
  - If serving dotfiles/static large files, override new defaults.
